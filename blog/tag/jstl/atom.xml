<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: JSTL | Programming Design Notes]]></title>
  <link href="http://pro.ctlok.com/blog/tag/jstl/atom.xml" rel="self"/>
  <link href="http://pro.ctlok.com/"/>
  <updated>2012-04-03T14:45:19+08:00</updated>
  <id>http://pro.ctlok.com/</id>
  <author>
    <name><![CDATA[Lawrence Cheung]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[利用 JavaServer Pages Standard Tag Library (JSTL) 切換網頁語言 (i18n)]]></title>
    <link href="http://pro.ctlok.com/2010/02/javaserver-pages-standard-tag-library.html"/>
    <updated>2010-02-09T11:50:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/02/javaserver-pages-standard-tag-library</id>
    <content type="html"><![CDATA[<p>利用 JSTL 的&nbsp;Internationalization Tag Library 可以輕鬆的做出支援多國語言的網頁。<br /><br />先增加一個 Package:&nbsp;com.blogspot.lawpronotes.language。<br />在&nbsp;com.blogspot.lawpronotes.language 內新增 3 個 .properties ，命名為&nbsp;form.properties 、form_en.properties 和&nbsp;form_zh.properties。因為 .properties 檔案必須使用&nbsp;ISO 8859-1 編碼，所以是不能直接輸入中文的，要轉換成 Unicode 才可以。<br /><br />使用 Eclipse 的可以參考這篇去安裝 Properties Editor:&nbsp;<a href="http://lawpronotes.blogspot.com/2010/02/eclipse-plugin-properties-editor.html">http://lawpronotes.blogspot.com/2010/02/eclipse-plugin-properties-editor.html</a><br /><br />使用 Properties Editor 可以直接將以下文字複製。<br /><br />form.properties<br /><pre class="brush: text">userName=用戶名稱<br />password=密碼<br /></pre><br />form_en.properties<br /><pre class="brush: text">userName=User Name<br />password=Password<br /></pre><br />form_zh.properties<br /><pre class="brush: text">userName=用戶名稱<br />password=密碼<br /></pre><br />非使用 Properties Editor 請複製以下內容。<br /><br />form.properties<br /><pre class="brush: text">userName=\u7528\u6236\u540d\u7a31<br />password=\u5bc6\u78bc<br /></pre><br />form_en.properties<br /><pre class="brush: text">userName=User Name<br />password=Password<br /></pre><br />form_zh.properties<br /><pre class="brush: text">userName=\u7528\u6236\u540d\u7a31<br />password=\u5bc6\u78bc<br /></pre><br />現在新增一個 JSP 檔案，將以下內容複製到 JSP 檔案內。<br /><pre class="brush: html">&lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;<br />&lt;%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%&gt;<br />&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"<br />                    "http://www.w3.org/TR/html4/loose.dtd"&gt;<br />&lt;html&gt;<br />    &lt;head&gt;<br />        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;<br />        &lt;title&gt;GlassFish JSP Page&lt;/title&gt;<br />    &lt;/head&gt;<br />    &lt;body&gt;<br />        &lt;fmt:setLocale value="en" /&gt;<br />        &lt;fmt:setBundle basename="com/blogspot/lawpronotes/language/form" var="formBundle" /&gt;<br />        &lt;form&gt;<br />            &lt;label&gt;&lt;fmt:message key="userName" bundle="${formBundle}" /&gt;: &lt;/label&gt;<br />            &lt;input type="text" /&gt;&lt;br /&gt;<br />            &lt;label&gt;&lt;fmt:message key="password" bundle="${formBundle}" /&gt;: &lt;/label&gt;<br />            &lt;input type="text" /&gt;&lt;br /&gt;<br />        &lt;/form&gt;<br />    &lt;/body&gt;<br />&lt;/html&gt;<br /></pre><br />使用瀏覽器去看一看會看見以下畫面。<br /><div class="separator" style="clear: both; text-align: left;"><a href="http://2.bp.blogspot.com/_fDN8R2Wgbcs/S3DXkPkjgMI/AAAAAAAAAdU/87jlgtlmmOo/s1600-h/jstli8n.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_fDN8R2Wgbcs/S3DXkPkjgMI/AAAAAAAAAdU/87jlgtlmmOo/s320/jstli8n.png" /></a></div><br />現在將<br /><pre class="brush: html">&lt;fmt:setLocale value="en" /&gt;<br /></pre><br />改成<br /><pre class="brush: html">&lt;fmt:setLocale value="zh" /&gt;<br /></pre><br />使用瀏覽器去看一看會變成以下畫面。<br /><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/_fDN8R2Wgbcs/S3DYQZo3dmI/AAAAAAAAAdc/-6z62eRqn5Q/s1600-h/jstli8n1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/_fDN8R2Wgbcs/S3DYQZo3dmI/AAAAAAAAAdc/-6z62eRqn5Q/s320/jstli8n1.png" /></a></div><br />現在解釋一下。<br />這句是宣告此 JSP 使用 Internationalization Tag Library。<br /><pre class="brush: html">&lt;%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%&gt;<br /></pre><br />這句是將宣告此頁面是那種語言。value 是根據你設定的語言而找出相對應的語言檔，即是 <em>en 和 </em>zh。<br /><pre class="brush: html">&lt;fmt:setLocale value="en" /&gt;<br /></pre><br />這句是找出指定的語言檔，因為利用了 &lt;fmt:setLocale value="en" /&gt; 來設定語言，所以不必將 form 換成 form_en 或 form_zh。其中的 var="formBundle" 是將語言檔放進變數內，這意味著同一個頁面可以引入多個語言檔。如果找不到語言檔就會使用預設語言檔，即是 form.properties。<br /><pre class="brush: html">&lt;fmt:setBundle basename="com/blogspot/lawpronotes/language/form" var="formBundle" /&gt;<br /></pre><br />這句是在 formBundle 這個變數內找出關鍵字再顯示出來。因為已經將語言檔放進變數內。<br /><pre class="brush: html">&lt;fmt:message key="userName" bundle="${formBundle}" /&gt;<br /></pre><br />最後大家當然使用自己的創作力去令切換語言更有彈性。<br /><br />相關書籍: <a href="http://www.amazon.com/JSTL-Action-Shawn-Bayern/dp/1930110529?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="JSTL in Action" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1930110529&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1930110529" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/Core-JSTL-Mastering-Standard-Library/dp/0131001531?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Core JSTL: Mastering the JSP Standard Tag Library" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=0131001531&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0131001531" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/JSTL-Practical-Guide-Programmers-Guides/dp/0126567557?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="JSTL: Practical Guide for JSP Programmers (The Practical Guides)" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=0126567557&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0126567557" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-5921232724691983944?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
</feed>
