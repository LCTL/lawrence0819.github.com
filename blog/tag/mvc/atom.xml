<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: MVC | Programming Design Notes]]></title>
  <link href="http://pro.ctlok.com/blog/tag/mvc/atom.xml" rel="self"/>
  <link href="http://pro.ctlok.com/"/>
  <updated>2012-03-26T14:29:28+08:00</updated>
  <id>http://pro.ctlok.com/</id>
  <author>
    <name><![CDATA[Lawrence Cheung]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[PHP Framework - CodeIgniter]]></title>
    <link href="http://pro.ctlok.com/2010/06/php-framework-codeigniter.html"/>
    <updated>2010-06-07T12:13:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/06/php-framework-codeigniter</id>
    <content type="html"><![CDATA[<p>最近要替公司制作一個小型網站，便到 GoDaddy 申請 Domain Name，因為 Domain Name 連 Hosting 服務一起購買會便宜很多，所以順便看看 GoDaddy 的 Hosting 服務。我看到 Linux 主機詳細支援有列出 Servlet/JSP，心想那麼好便試試吧，怎知我的 JSP 連打印 Hello World 出來也不能，Server 不能將我的 JSP 編譯，真奇怪(有那位網友知道怎麼解決嗎？)。最後唯有改用 PHP。以前寫 PHP 時不會理什麼 MVC 架構，快點完成便可以，但現在又接受不到那種混亂的格式，上網找尋一下發現 PHP Framework 有數十種，沒可能每一個也去試吧，經朋友介紹下使用了 CodeIgniter 這套 Framework，在這裡記錄安裝步驟。<br /><br />官方網址: <a href="http://codeigniter.com/">CodeIgniter</a><br /><br />下載網址: <a href="http://codeigniter.com/download.php">Download</a><br /><br />下載完成並解壓縮後會有 system 目錄、user_guide 目錄、index.php 和 license.txt，為了提高安全性，請將 system 目錄變更為其他名稱，例如: pro_ctlok_system。變更名稱後打開 index.php 更改參數，將 <br /><pre class="brush: php">$system_folder = &quot;system&quot;; <br /></pre><br />變更為:<br /><pre class="brush: php">$system_folder = &quot;pro_ctlok_system&quot;;<br /></pre><br />現在設定網站的 Domain name，打開 pro_ctlok_system/application/config/config.php 更改參數，將<br /><pre class="brush: php">$config[&#39;base_url&#39;] = &quot;http://example.com/&quot;;<br /></pre><br />變更為網站的 Domain name:<br /><pre class="brush: php">$config[&#39;base_url&#39;] = &quot;pro.ctlok.com&quot;;<br /></pre><br />要使用到 Database 的可以打開 pro_ctlok_system/application/config/database.php 做一些設定:<br /><pre class="brush: php">$db[&#39;default&#39;][&#39;hostname&#39;] = &quot;localhost&quot;;<br />$db[&#39;default&#39;][&#39;username&#39;] = &quot;lawrence&quot;;<br />$db[&#39;default&#39;][&#39;password&#39;] = &quot;123456&quot;;<br />$db[&#39;default&#39;][&#39;database&#39;] = &quot;ctlok&quot;;<br />$db[&#39;default&#39;][&#39;dbdriver&#39;] = &quot;mysql&quot;;<br />$db[&#39;default&#39;][&#39;dbprefix&#39;] = &quot;&quot;;<br />$db[&#39;default&#39;][&#39;pconnect&#39;] = TRUE;<br />$db[&#39;default&#39;][&#39;db_debug&#39;] = TRUE;<br />$db[&#39;default&#39;][&#39;cache_on&#39;] = FALSE;<br />$db[&#39;default&#39;][&#39;cachedir&#39;] = &quot;&quot;;<br />$db[&#39;default&#39;][&#39;char_set&#39;] = &quot;utf8&quot;;<br />$db[&#39;default&#39;][&#39;dbcollat&#39;] = &quot;utf8_general_ci&quot;;<br /></pre><br />CodeIgniter 亦支援自動連接 Database，打開 pro_ctlok_system/application/config/autoload.php 更改參數，將<br /><pre class="brush: php">$autoload['libraries'] = array();<br /></pre><br />變更為<br /><pre class="brush: php">$autoload['libraries'] = array('database');<br /></pre><br />現在可以將 pro_ctlok_system 目錄和 index.php 放到網站的根目錄，然後打開 index.php 看看是否出現 CodeIgniter 的歡迎頁面。<br /><br /><strong><em>使用 GoDaddy Hosting 服務要作出以下更改</em></strong><br /><br />使用上面的設定然後放上 GoDaddy Hosting 是不行的，雖然打開 index.php 出現 CodeIgniter 的歡迎頁面， 但其他Controller 是不能正常運作的。<br /><br />打開 config.php 更改以下參數:<br /><pre class="brush: php">$config[&#39;index_page&#39;] = &quot;index.php?&quot;;<br />$config[&#39;uri_protocol&#39;] = &quot;QUERY_STRING&quot;;<br /></pre><br />然後在根目錄新增 .htaccess 檔案並輸入以下內容:<br /><pre class="brush: text">RewriteEngine on<br />RewriteCond %{REQUEST_FILENAME} !-f<br />RewriteCond %{REQUEST_FILENAME} !-d<br />RewriteRule ^(.*)$ /index.php?$1 [L]<br /></pre><br />現在可以以這種方式打開 Controller 了<br /><pre class="brush: text">http://pro.ctlok.com/controller/action/etc<br /></pre><br />相關書籍: <a imageanchor="1" target="_blank"  href="http://www.amazon.com/CodeIgniter-Rapid-PHP-Application-Development/dp/1847191746?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="CodeIgniter for Rapid PHP Application Development: Improve your PHP coding productivity with the free compact open-source MVC CodeIgniter framework!" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1847191746&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1847191746" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/Professional-CodeIgniter-Thomas-Myer/dp/0470282452?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="Professional CodeIgniter" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=0470282452&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=0470282452" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/CodeIgniter-professional-development-Adam-Griffith/dp/1849510903?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="CodeIgniter 1.7 professional development" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1849510903&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1849510903" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-4800080292002533507?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Spring Web MVC + AspectJ 記錄 IP]]></title>
    <link href="http://pro.ctlok.com/2010/02/spring-web-mvc-aspect-ip.html"/>
    <updated>2010-02-28T22:53:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/02/spring-web-mvc-aspect-ip</id>
    <content type="html"><![CDATA[<p>因為 AspectJ 需要用介面去制作一個代理 (proxy)(如果有使用 CGLib 可以不使用介面 (interface))，所以先制作一個介面 (interface)，這個 Spring Web controller 的介面 ，介名為 com.blogsport.lawpronotes.controller.MyController。<br />MyController 程式碼:<br /><pre class="brush: java">package com.blogsport.lawpronotes.controller;<br /><br />import org.springframework.web.bind.annotation.RequestMapping;<br />import org.springframework.web.bind.annotation.RequestMethod;<br /><br />public interface MyController {<br />    @RequestMapping<br />    public String genenalProcess();<br />    @RequestMapping(method=RequestMethod.GET, params=&quot;view=iphone&quot;)<br />    public String IPhoneView();<br />}<br /></pre><br />在 method 上需要加上註解，不然該 method 無法被 Spring Web Controller 調用。<br /><br />新增一個 Class 去實作這個介面，命名為 IndexController。<br />IndexController 程式碼:<br /><pre class="brush: java">package com.hkforum.web.controller;<br /><br />import org.springframework.stereotype.Controller;<br />import org.springframework.web.bind.annotation.RequestMapping;<br /><br />@Controller<br />@RequestMapping(&quot;/index&quot;)<br />public class IndexController implements MyController {<br />    @RequestMapping<br />    public String genenalProcess() {<br />        return &quot;index&quot;;<br />    }<br /><br />    @RequestMapping<br />    public String IPhoneView() {<br />        return &quot;iphoneIndex&quot;;<br />    }<br />}<br /></pre><br />實作的 method 也需要加上註解，作用是要 Aspect 辨識出該 method 是用戶要求調用的方法。<br /><br />現在新增個一個 Class，命名為 com.blogsport.lawpronotes.logger.WebLogger，用來記錄用戶使用了那一個 method 和 IP 地址。<br />WebLogger 程式碼:<br /><pre class="brush: java">package com.blogsport.lawpronotes.logger;<br /><br />import org.aspectj.lang.JoinPoint;<br />import org.aspectj.lang.annotation.Aspect;<br />import org.aspectj.lang.annotation.Before;<br />import org.aspectj.lang.annotation.Pointcut;<br />import org.springframework.web.context.request.RequestContextHolder;<br />import org.springframework.web.context.request.ServletRequestAttributes;<br /><br />@Aspect<br />public class WebLogger {<br /><br />    @Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)<br />    public void anyRequestMappingMethod() {<br />    }<br /><br />    @Pointcut(&quot;execution(<em> com.hkforum.web.controller.</em>.<em>(..))&quot;)<br />    public void anyControllerMethod() {<br />    }<br /><br />    @Pointcut(&quot;execution(public * </em>(..))&quot;)<br />    public void anyPublicMethod() {<br />    }<br /><br />    @Pointcut(&quot;anyControllerMethod() &amp;&amp; anyPublicMethod() &amp;&amp; anyRequestMappingMethod()&quot;)<br />    public void anyInteractionMethod() {<br />    }<br /><br />    @Before(&quot;anyInteractionMethod()&quot;)<br />    public void recordIP(JoinPoint pjp) {<br />        String remoteAddress = ((ServletRequestAttributes) RequestContextHolder<br />                .currentRequestAttributes()).getRequest().getRemoteAddr();<br />        System.out.println(pjp.toString() + &quot; ip:&quot; + remoteAddress);<br />    }<br />}<br /></pre><br />截取有 RequestMapping 註解的 method:<br /><pre class="brush: java">@Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping)&quot;)<br /></pre><br />截取所有 Web Controller 的 Class:<br /><pre class="brush: java">@Pointcut(&quot;execution(<em> com.hkforum.web.controller.</em>.<em>(..))&quot;)<br /></pre><br />截取所有公開 method:<br /><pre class="brush: java">@Pointcut(&quot;execution(public * </em>(..))&quot;)<br /></pre><br />截取合乎以上條件的方法:<br /><pre class="brush: java">@Pointcut(&quot;anyControllerMethod() &amp;&amp; anyPublicMethod() &amp;&amp; anyRequestMappingMethod()&quot;)<br /></pre><br />因為 Web Controller bean 不是一般的 Spring Bean，所以不會在 applicationContext.xml 加上 Aspect，而且加了也不能截取 Web Controller Bean。<br />現在要更改 dispatcherServlet-servlet.xml。<br />請加上以下程式碼:<br /><pre class="brush: xml">&lt;aop:aspectj-autoproxy /&gt;<br />&lt;bean id=&quot;webLogger&quot; class=&quot;com.hkforum.web.logger.WebLogger&quot; /&gt;<br />&lt;bean id=&quot;indexController&quot; class=&quot;com.hkforum.web.controller.IndexController&quot; /&gt;<br /></pre><br />完整 dispatcherServlet-servlet.xml:<br /><pre class="brush: xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;<br />    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;<br />    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;<br />    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<br /> http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd<br /> http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;&gt;<br /><br />    &lt;aop:aspectj-autoproxy /&gt;<br />    &lt;bean id=&quot;webLogger&quot; class=&quot;com.hkforum.web.logger.WebLogger&quot; /&gt;<br />    &lt;bean id=&quot;indexController&quot; class=&quot;com.hkforum.web.controller.IndexController&quot; /&gt;<br />    &lt;bean id=&quot;viewResolver&quot;<br />        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;<br />        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot; /&gt;<br />        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;<br />    &lt;/bean&gt;<br />&lt;/beans&gt;<br /></pre><br /><em><em>請自行新增 index.jsp 和 iphoneIndex.jsp 到 /WEB-INF/views/ 資料夾下。<br /><br />用瀏覽器打開 index.</em>， Console 會顯示:<br /><pre class="brush: text">execution(String com.hkforum.web.controller.MyController.genenalProcess()) ip:127.0.0.1<br /></pre>如果是 index.</em>?view=iphone，Console 會顯示:<br /><pre class="brush: text">execution(String com.hkforum.web.controller.MyController.IPhoneView()) ip:127.0.0.1<br /></pre><br />以這種方式來制作截取記錄的好處是可以將記錄程式碼和控制程式碼分開，而且能夠截取到多個 method，又可以減少多餘的程式碼，又比較好維護。<br /><br />相關書籍: <a imageanchor="1" target="_blank"  href="http://www.amazon.com/Spring-Recipes-Problem-Solution-Gary-Mak/dp/1590599799?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="Spring Recipes: A Problem-Solution Approach" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1590599799&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1590599799" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/Spring-Action-Craig-Walls/dp/1933988134?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="Spring in Action" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1933988134&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1933988134" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/Spring-Web-Recipes-Problem-Solution-Technologies/dp/1430224991?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="Spring Web Recipes: A Problem-Solution Approach to Spring Framework Web Development Technologies" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1430224991&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1430224991" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-140520351571043313?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ZK 利用 GenericForwardComposer 來達到 MVC 結構]]></title>
    <link href="http://pro.ctlok.com/2010/02/zk-genericforwardcomposer-mvc.html"/>
    <updated>2010-02-26T15:08:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/02/zk-genericforwardcomposer-mvc</id>
    <content type="html"><![CDATA[<p>MVC 的好處是于不必在視圖插入控制的程式碼，令視圖專是去做顯示的工作，而且更容易維護程式。ZK 也可以做到視圖和控制程式碼分離。<br /><br />首先制作一個 index.zul<br /><pre class="brush: xml">&lt;?page title=&quot;Index&quot; contentType=&quot;text/html;charset=UTF-8&quot;?&gt;<br />&lt;zk&gt;<br />    &lt;window title=&quot;Index&quot; border=&quot;normal&quot;&gt;<br />        &lt;button id=&quot;btn&quot; label=&quot;Say Hello World&quot; /&gt;<br />    &lt;/window&gt;<br />&lt;/zk&gt;<br /></pre><br />然後新增一個 Class <br />package com.blogspot.lawpronotes.web.ui.IndexController<br /><pre class="brush: java">package com.blogspot.lawpronotes.web.ui;<br /><br />import org.zkoss.zk.ui.Component;<br />import org.zkoss.zk.ui.util.GenericForwardComposer;<br />import org.zkoss.zul.Button;<br />import org.zkoss.zul.Label;<br /><br />public class IndexController extends GenericForwardComposer{<br /><br />    private static final long serialVersionUID = 1L;<br />    <br />    //ZK Component<br />    private Button btn;<br />    <br />    private Label lb;<br />    <br />    public IndexController(){<br />        lb = new Label();<br />    }<br />    <br />    @Override<br />    public void doAfterCompose(Component comp) throws Exception {<br />        super.doAfterCompose(comp);<br />    }<br />    <br />    public void onClick$btn(){<br />        lb.setValue(&quot;Hello World&quot;);<br />        self.appendChild(lb);<br />    }<br />}<br /></pre><br />Controller 要 extends GenericForwardComposer 去令 ZK Engine 知道這是個 Controller。(雖然還有其他方法去實現 MVC，但個人覺得用 extends GenericForwardComposer 這個方式是最好的)<br /><br />在 IndexController 這個 Class 內有一個 Button btn，而這個 btn 是 index.zul 內的 &lt;button id=&quot;btn&quot; label=&quot;Say Hello World&quot;/&gt;，btn 這個名字一定要跟 index.zul 的 button  id 一模一樣，ZK Engine 會根據這個名稱自動將<br />&lt;button id=&quot;btn&quot; label=&quot;Say Hello World&quot;/&gt; 注入到 Button btn 內。<br /><br />doAfterCompose(Component comp) 這個方法在頁面組成後會由 ZK Engine 自動去執行，你可以在 super.doAfterCompose(comp); 這句後加入一些頁面設定的程式碼。<br /><br />public void onClick$btn() 是事件的 function，[事件]$[物件] 這樣的模式去令 ZK Engine 知道這是什麼物件的事件。<br /><br />現在修改 index.zul 去令視圖和控制器連接，將 <br /><pre class="brush: xml">&lt;window title=&quot;Index&quot; border=&quot;normal&quot;&gt; <br /></pre>改為 <br /><pre class="brush: xml">&lt;window title=&quot;Index&quot; border=&quot;normal&quot; apply=&quot;com.blogspot.lawpronotes.web.ui.IndexController&quot;&gt;<br /></pre>這樣便可以將 window 這個物件和控制器連接起來，而控制器可以控制 window 內的所有物件。<br /><br />完整 index.zul<br /><pre class="brush: xml">&lt;?page title=&quot;Index&quot; contentType=&quot;text/html;charset=UTF-8&quot;?&gt;<br />&lt;zk&gt;<br />    &lt;window title=&quot;Index&quot; border=&quot;normal&quot;<br />        apply=&quot;com.blogspot.lawpronotes.web.ui.IndexController&quot;&gt;<br />        &lt;button id=&quot;btn&quot; label=&quot;Say Hello World&quot; /&gt;<br />    &lt;/window&gt;<br />&lt;/zk&gt;<br /></pre><br />現在用瀏覽器打開 index.zul 頁面，按一下按鈕便會出現 Hello World。<br /><br />相關書籍: <a imageanchor="1" target="_blank"  href="http://www.amazon.com/ZK-Ajax-without-Javascript-Framework/dp/1590599012?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="ZK: Ajax without the Javascript Framework" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1590599012&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1590599012" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/Developers-Guide-Developing-applications-development/dp/1847192009?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="ZK Developer&#39;s Guide: Developing responsive user interfaces for web applications using Ajax, XUL, and the open source ZK rich web client development framework" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1847192009&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1847192009" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/Effective-Java-2nd-Joshua-Bloch/dp/0321356683?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="Effective Java (2nd Edition)" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=0321356683&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=0321356683" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-7897084862206083823?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[最簡單的方式實現 MVC (Servlet + JSP)]]></title>
    <link href="http://pro.ctlok.com/2010/02/mvc-servlet-jsp.html"/>
    <updated>2010-02-04T11:25:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/02/mvc-servlet-jsp</id>
    <content type="html"><![CDATA[<p>Model-View-Controller 是現時流行的系統架構，Model 代表模型(資料)，View 代表視圖，Controller 代表控制器，使用 Servlet 和 JSP 實現 MVC 系統架構是非常簡單的，可以在完全不使用仕何 Framework 的情況下實現 MVC。<br /><br />下圖顯示出 Model, View 和 Controller 的關係，以 Controller 為中心，控制整個流程。<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_fDN8R2Wgbcs/S2o2OFYCBLI/AAAAAAAAAdM/MZNbYswlrww/s1600-h/350px-ModelViewControllerDiagram.svg.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/_fDN8R2Wgbcs/S2o2OFYCBLI/AAAAAAAAAdM/MZNbYswlrww/s320/350px-ModelViewControllerDiagram.svg.png" /></a></div><br />大部份的開發者也會將 HTML 和 其他程式碼混合到一個檔案內，雖然這樣的做發可能令開發時間減少，但以後要修改或維護時便非常困難，要實現 MVC 時不能令視圖被使用者直接用到，如果能被直接用1到便失去了 MVC 的價值，所以私們要將視圖(JSP) 放到使用者不能進入的位置。<br /><div style="text-align: left;"><br />在&nbsp;WEB-INF 資料夾下新增一個 pages 的資料夾，在&nbsp;WEB-INF/pages&nbsp;資料夾下新增一個 index.jsp 的檔案並貼上以下程式碼。WEB-INF 是使用者不能夠進入的位置，這樣便不姅擔心 JSP 僧被直接看到。<br /><br /><pre class="brush: html">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;<br />pageEncoding=&quot;UTF-8&quot; isELIgnored=&quot;false&quot;%&gt;<br />&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;<br />&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;<br />&lt;html&gt;<br />    &lt;head&gt;<br />        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;<br />            &lt;title&gt;Index&lt;/title&gt;<br />    &lt;/head&gt;<br />    &lt;body&gt;<br />        &lt;c:out value=&quot;${ model['message'] }&quot; /&gt;<br />    &lt;/body&gt;<br />&lt;/html&gt;<br /></pre><br />現在新增 Package 為 com.blogspot.lawpronotes.servlet ，在 Package 內新增一個&nbsp;Servlet 命名為 IndexServlet.java 並貼上以下程式碼。<br /><br /><pre class="brush: java">package com.blogspot.lawpronotes.servlet;<br /><br />import java.io.IOException;<br />import java.util.HashMap;<br />import java.util.Map;<br /><br />import javax.servlet.RequestDispatcher;<br />import javax.servlet.ServletException;<br />import javax.servlet.http.HttpServlet;<br />import javax.servlet.http.HttpServletRequest;<br />import javax.servlet.http.HttpServletResponse;<br /><br />public class IndexServlet extends HttpServlet {<br />    private static final long serialVersionUID = 1L;<br /><br />    public IndexServlet() {<br />        super();<br />    }<br /><br />    protected void doGet(HttpServletRequest request,<br />            HttpServletResponse response) throws ServletException, IOException {<br />        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();<br />        model.put(&quot;message&quot;, &quot;Hello World&quot;);<br />        request.setAttribute(&quot;model&quot;, model);<br />        // Forward to JSP file to display message<br />        RequestDispatcher dispatcher = request<br />                .getRequestDispatcher(&quot;/WEB-INF/pages/index.jsp&quot;);<br />        dispatcher.forward(request, response);<br />    }<br />}<br /></pre><br />web.xml 設定如下:<br /><pre class="brush: xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br />    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;<br />    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;<br />    id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;<br />    &lt;display-name&gt;MVC&lt;/display-name&gt;<br />    &lt;welcome-file-list&gt;<br />        &lt;welcome-file&gt;index&lt;/welcome-file&gt;<br />    &lt;/welcome-file-list&gt;<br />    &lt;servlet&gt;<br />        &lt;description&gt;&lt;/description&gt;<br />        &lt;display-name&gt;IndexServlet&lt;/display-name&gt;<br />        &lt;servlet-name&gt;IndexServlet&lt;/servlet-name&gt;<br />        &lt;servlet-class&gt;com.blogspot.lawpronotes.servlet.IndexServlet&lt;/servlet-class&gt;<br />    &lt;/servlet&gt;<br />    &lt;servlet-mapping&gt;<br />        &lt;servlet-name&gt;IndexServlet&lt;/servlet-name&gt;<br />        &lt;url-pattern&gt;/index&lt;/url-pattern&gt;<br />    &lt;/servlet-mapping&gt;<br />&lt;/web-app&gt;<br /></pre><br /><pre class="brush: java">Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();<br />model.put("message", "Hello World");<br /></pre><br />這就是最簡單的做法，使了 Map 去將所有資料放進去，再交由視圖去顯示出來，JSP 將會顯示 Hello World。<br /><br /><pre class="brush: java">request.setAttribute("model", model);<br /></pre><br />這句是要將 Model 放到 JSP 可以拿得到的地方。<br /><br /><pre class="brush: java">RequestDispatcher dispatcher = request.getRequestDispatcher("/WEB-INF/pages/index.jsp");<br />dispatcher.forward(request, response);<br /></pre><br />RequestDispatcher 作用是將使用者轉發到 JSP 的位置，但使用者是不會知道的，因為這只是 Server 內部的轉發，和 Redirect 不同。<br /><br />相關書籍: <a href="http://www.amazon.com/Murachs-Java-Servlets-JSP-2nd/dp/1890774448?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Murach's Java Servlets and JSP, 2nd Edition" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1890774448&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1890774448" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/Head-First-Servlets-JSP-Certified/dp/0596516681?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Head First Servlets and JSP: Passing the Sun Certified Web Component Developer Exam" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=0596516681&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0596516681" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/JavaServer-Pages-3rd-Hans-Bergsten/dp/0596005636?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="JavaServer Pages, 3rd Edition" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=0596005636&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0596005636" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><br /><br /></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-988610871402524739?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Google App Engine (GAE) 使用 Spring 3 Web MVC]]></title>
    <link href="http://pro.ctlok.com/2010/01/google-app-engine-spring-3-freamwork.html"/>
    <updated>2010-01-17T22:46:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/01/google-app-engine-spring-3-freamwork</id>
    <content type="html"><![CDATA[<p><span style="font-size: small;">此教學使用 Eclipse IDE 制作</span><br /><div style="text-align: left;"><span style="font-size: small;"><br /></span> </div><div style="text-align: left;"><span style="font-size: small;">Eclipse 在這裡</span><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">下載</span></span></div><div style="text-align: left;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">網址:&nbsp;</span></span><a href="http://www.eclipse.org/downloads/"><span style="font-size: small;">http://www.eclipse.org/downloads/</span></a></div><div style="text-align: left;"><span style="font-size: small;">推薦</span><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">下載</span></span><span style="font-size: small;">&nbsp;Eclipse IDE for Java EE Developers</span></div><div style="text-align: left;"><span style="font-size: small;"><br /></span></div><div style="text-align: left;"><span style="font-size: small;">要取得 Google App Engine plugin for Eclipse 可以到這裡</span><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">下載</span></span></div><div style="text-align: left;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">網址:&nbsp;</span><a href="http://code.google.com/intl/zh-TW/eclipse/docs/download.html"><span style="font-size: small;">http://code.google.com/intl/zh-TW/eclipse/docs/download.html</span></a></span></div><div style="text-align: left;"><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;"><br /></span> </span></span></div><div style="text-align: left;"><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="color: #cc0000;"><span style="font-size: small;">有一點要注意</span></span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="color: #cc0000;"><span style="font-size: small;">Eclipse 預設是使用 JRE 而不是 JDK</span></span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="color: #cc0000;"><span style="font-size: small;">我們要將 JRE 改為 JDK 才不會發生錯誤</span></span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;"><br /></span> </span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">沒有 JDK 的請到</span><span style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: separate; font-family: Arial; line-height: normal;"><span style="font-size: small;">這裡</span><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">下載</span></span></span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: separate; font-family: Arial; line-height: normal;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">網址:&nbsp;</span><a href="http://java.sun.com/javase/downloads/index.jsp"><span style="font-size: small;">http://java.sun.com/javase/downloads/index.jsp</span></a></span></span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;"><br /></span> </span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">Window -&gt; Preferences -&gt; Java -&gt; Installed JREs -&gt; Add -&gt; Standard JVM</span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">Java 預設安裝路徑 :&nbsp;C:\Program Files\Java</span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">然後選擇 JDK 的資料夾</span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">按下 Finish 後請緊記要選取剛剛加入的 JDK</span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;"><br /></span> </span></span></div><div style="text-align: left;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">設定完成了第一步當然要先開一個新的 Google App Engine project</span></span></div><div style="text-align: left;"><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">選擇 File -&gt; New -&gt; Other -&gt; Google -&gt; Web Application Project</span></span></span></div><div style="text-align: left;"><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;"><br /></span> </span></span></div><div style="text-align: left;"><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">將會看見以下畫面</span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><br /></span></span><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_fDN8R2Wgbcs/S1MSm0wv7jI/AAAAAAAAAUE/4PV0oBOuAgo/s1600-h/GAE_Create_Project.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/_fDN8R2Wgbcs/S1MSm0wv7jI/AAAAAAAAAUE/4PV0oBOuAgo/s320/GAE_Create_Project.png" /></a></div><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><br /></span></span><br /><div class="separator" style="clear: both; text-align: left;"><span style="font-size: small;">輸入 Project 名稱, Package&nbsp;名稱</span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: small;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: small;">如果你不打算仲用 Google Web Toolkit 或根本不知這是什麼</span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: small;">請不要選取</span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: small;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: small;">然後到&nbsp;</span><a href="http://www.springsource.com/download/community"><span style="font-size: small;">http://www.springsource.com/download/community</span></a><span style="font-size: small;">&nbsp;</span><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">下載最新的 Spring Freamwork 3</span></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">17-01-2010 最新版本是&nbsp;</span><span style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; border-collapse: separate; font-family: Tahoma, Verdana, Arial, Helvetica, 'Bitstream Vera Sans', sans-serif; line-height: 17px;"><b><span style="font-weight: normal;"><span style="font-size: small;">Spring Framework&nbsp;3.0.0.RELEASE</span></span><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; font-weight: normal; line-height: 18px;"><span style="font-size: small;">&nbsp;</span></span></b></span></span></span></div><div class="separator" style="clear: both; text-align: left;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">下載完成解壓縮後</span></span></div><div class="separator" style="clear: both; text-align: left;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">到 dist 資料夾將以下的檔案複製到 war/WEB-INF/lib</span></span></div><div class="separator" style="clear: both; text-align: left;"><br /></div><ol><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.aop-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.asm-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.beans-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.context.support-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.context-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.core-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.expression-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.orm-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.web.servlet-3.0.0.RELEASE.jar</span></span></li><li><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">org.springframework.web-3.0.0.RELEASE.jar</span></span></li></ol><div><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">然後到&nbsp;</span><a href="http://commons.apache.org/downloads/download_logging.cgi"><span style="font-size: small;">http://commons.apache.org/downloads/download_logging.cgi</span></a><span style="font-size: small;">&nbsp;下載 common-logging.jar</span></span></span></div><div><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;"><span style="font-size: medium;"><span style="font-size: small;">17-01-2010 最新版本是 1.1</span></span></span></span></div><div><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">請將&nbsp;commons-logging-1.1.1.jar 複製到&nbsp;&nbsp;war/WEB-INF/lib</span></span></div><div><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">所需的檔案也齊了</span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;"><br /></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;">選取 Project -&gt; 滑鼠右鍵 -&gt; Properties -&gt; Java Build Path -&gt; Library -&gt; Add JARs...</span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;">選取&nbsp;war/WEB-INF/lib 下所有 JAR 檔案</span></span></div><div><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;"><br /></span></span></div><div><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-size: small; line-height: 18px;">下一步修改 war/WEB-INF/web.xml</span></span></div><br /></div><pre class="brush: xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br />xmlns="http://java.sun.com/xml/ns/javaee"<br />xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"<br />xsi:schemaLocation="http://java.sun.com/xml/ns/javaee<br />http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5"&gt;<br /> &lt;servlet&gt;  <br />        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;  <br />        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;  <br />        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;  <br />    &lt;/servlet&gt;  <br />    &lt;servlet-mapping&gt;  <br />        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;  <br />        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;  <br />    &lt;/servlet-mapping&gt;<br /> &lt;welcome-file-list&gt; <br />        &lt;welcome-file&gt;index.do&lt;/welcome-file&gt; <br />    &lt;/welcome-file-list&gt;<br />&lt;/web-app&gt;<br /></pre><br /><span style="font-size: small;">在 war/WEB-INF 下新增一個&nbsp;dispatcher-servlet.xml 檔案</span><br /><span style="font-size: small;">輸入以下內容</span><br /><span style="font-size: small;"><br /></span><br /><pre class="brush: xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;<br />    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;<br />    xsi:schemaLocation=&quot;<br />http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<br />http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;<br />    &lt;context:component-scan base-package=&quot;com.lokhkg.www.controller&quot; /&gt;<br />    &lt;bean id=&quot;viewResolver&quot;<br />        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;<br />        &lt;property name=&quot;prefix&quot;&gt;<br />            &lt;value&gt;/WEB-INF/views&lt;/value&gt;<br />        &lt;/property&gt;<br />        &lt;property name=&quot;suffix&quot;&gt;<br />            &lt;value&gt;jsp&lt;/value&gt;<br />        &lt;/property&gt;<br />    &lt;/bean&gt;<br />&lt;/beans&gt;<br /></pre><br /><span style="font-size: small;">在 base-package 處請輸入你的 Package 名稱</span><br /><br /><span style="font-size: small;">現在在 Package 新增一個 Java Class</span><br /><span style="font-size: small;">名稱:&nbsp;IndexController.java</span><br /><span style="font-size: small;">輸入以下內容</span><br /><span style="font-size: small;"><br /></span><br /><pre class="brush: java">package gae.controller;<br /><br />import org.springframework.stereotype.Controller;<br />import org.springframework.ui.Model;<br />import org.springframework.web.bind.annotation.RequestMapping;<br /><br />@Controller<br />@RequestMapping(value = "/index.do")<br />public class IndexController{<br /> @RequestMapping<br /> public String helloWorld(Model model){<br />  model.addAttribute("message", "Hello World!");<br />  return "index";<br /> }<br />}<br /></pre><br /><span style="font-size: small;">在 war/WEB-INF 新增一個 views 資料夾</span><br /><span style="font-size: small;">在&nbsp;views 資料夾內新增 index.jsp 檔案</span><br /><span style="font-size: small;">輸入以下內容</span><br /><span style="font-size: small;"><br /></span><br /><pre class="brush: html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"<br />pageEncoding="UTF-8" isELIgnored="false" %&gt;<br />&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;<br /> &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br /> &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;<br />&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;<br /> &lt;head&gt;<br />  &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;<br />  &lt;title&gt;Index&lt;/title&gt;<br /> &lt;/head&gt;<br /> &lt;body&gt;<br />  &lt;p&gt;${message}&lt;/p&gt;<br /> &lt;/body&gt;<br />&lt;/html&gt;<br /></pre><br /><span style="font-size: small;">現在可以測試一下了</span><br /><span style="font-size: small;">選取 Project -&gt; 按下滑鼠右鍵 -&gt; Run As -&gt; Web Application</span><br /><span style="font-size: small;">如果出現&nbsp;The server is running at http://localhost:8888/</span><br /><span style="font-size: small;">而沒有其他錯誤</span><br /><span style="font-size: small;">在</span><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; font-family: arial, sans-serif; line-height: 18px;"><span style="font-size: small;">瀏覽器輸入網址:&nbsp;</span><a href="http://localhost:8888/"><span style="font-size: small;">http://localhost:8888/</span></a></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><span style="font-size: small;">將會出現 Hello World!</span></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;"><br /></span></span><br /><span style="font-family: arial, sans-serif;"><span style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; border-collapse: collapse; line-height: 18px;">檔案架構:</span></span><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_fDN8R2Wgbcs/S1MdpvE-BYI/AAAAAAAAAUM/tKehXWR-Fcs/s1600-h/GAE_File_Structure.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_fDN8R2Wgbcs/S1MdpvE-BYI/AAAAAAAAAUM/tKehXWR-Fcs/s320/GAE_File_Structure.png" /></a></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />完整範例:&nbsp;<a href="http://sites.google.com/site/lawrencespace/lawpronotes/download/GAE.7z">GAE.7z</a><br /><br />相關書籍:&nbsp;<a href="http://www.amazon.com/Spring-Recipes-Problem-Solution-Approach-Professionals/dp/1590599799?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Spring Recipes: A Problem-Solution Approach (Books for Professionals by Professionals)" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1590599799&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1590599799" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/Spring-Action-Craig-Walls/dp/1933988134?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Spring in Action" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1933988134&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1933988134" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/Beginning-Java-Google-App-Engine/dp/143022553X?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Beginning Java Google App Engine" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=143022553X&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=143022553X" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-7043166299596499510?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
</feed>
