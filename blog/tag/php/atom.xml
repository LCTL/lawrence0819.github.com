<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: PHP | Programming Design Notes]]></title>
  <link href="http://pro.ctlok.com/blog/tag/php/atom.xml" rel="self"/>
  <link href="http://pro.ctlok.com/"/>
  <updated>2012-03-30T16:04:35+08:00</updated>
  <id>http://pro.ctlok.com/</id>
  <author>
    <name><![CDATA[Lawrence Cheung]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[PHP CodeIgniter 根據瀏覽器語言來顯示語言]]></title>
    <link href="http://pro.ctlok.com/2011/12/php-codeigniter-i18n-browser-locale.html"/>
    <updated>2011-12-18T16:48:00+08:00</updated>
    <id>http://pro.ctlok.com/2011/12/php-codeigniter-i18n-browser-locale</id>
    <content type="html"><![CDATA[<p><a href="http://smashingweb.ge6.org/wp-content/uploads/2009/08/codeigniter-lg.gif" imageanchor="1" style=""><img border="0" height="200" width="200" src="http://smashingweb.ge6.org/wp-content/uploads/2009/08/codeigniter-lg.gif" /></a><br /><br /><br />近排為客戶製作一個網頁，因為客戶已經買下了虛擬主機空間，不能用 <b>Java</b> 去作 <b>Server side language</b>，只好使用 <b>PHP + CodeIgniter</b>。他要求有轉換語言的功能，但發覺 <b>CodeIgniter</b> 本身的 <b>i18n</b> 功能不太完善，只好自己製作一個。<br /><br />這個 <b>i18n</b> 有點像 <b>JSF</b> 的<b>i18n</b> 功能，是根據用戶的瀏覽器語言來判定顯示那一種語言，並且對 <b>Controller</b> 控制語言的程式碼減少(可以 1 行程式碼也不用寫就能夠自動設換各種語言)。這可以減少重複的程式碼和減低 <b>Controller</b> 的複雜性。<br /><br />我己經將這個 <b>Library</b> 放上 <b>github</b> 了，有興趣可以下載來試試 <a href="https://github.com/lawrence0819/php-ci-internationalization">https://github.com/lawrence0819/php-ci-internationalization</a>。<br /><br />以下就是 <b>I18n.php (Core)</b>，放到 <b>application/libraries/I18n.php</b>。<br /><pre class="brush:php">&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');<br /><br />/<strong><br /> * I18n class<br /> <em><br /> * @package     CodeIgniter<br /> * @subpackage  Libraries<br /> * @category    Libraries<br /> * @author      Lawrence Cheung<br /> * @version     1.0<br /> * @link        https://github.com/lawrence0819<br /> </em>/<br />class I18n{<br />    <br />    protected $CI;<br />    protected $auto = TRUE;<br />    protected $loaded = FALSE;<br />    protected $locale;<br />    <br />    /</strong><br />     * Constructor - get CI instance<br />     <em><br />     </em>/<br />    public function <strong>construct(){<br />        $this -&gt; CI = get_instance(); <br />    }<br />    <br />    /<strong><br />     * Auto load language for CI HOOK<br />     <em><br />     * @access  public<br />     * @return  void<br />     </em>/<br />    public function auto_load_language(){<br />        if ($this -&gt; auto){<br />            $this -&gt; load_language();<br />        }<br />    }<br />    <br />    /</strong><br />     * Manual load language file<br />     <em><br />     * @access  public<br />     * @return  void<br />     </em>/<br />    public function load_language() {<br />        $lang = $this -&gt; get_current_locale();<br />        $language = $this -&gt; get_language_config();<br />        <br />        if (!$this -&gt; loaded) {<br />            $files = $language['files'];<br />            $locale = $language['locale'];<br /><br />            if (array_key_exists($lang, $locale)) {<br />                $folder = $locale[$lang];<br />            } else {<br />                $shortLang = substr($lang, 0, 2);<br />                if (array_key_exists($shortLang, $locale)) {<br />                    $folder = $locale[$shortLang];<br />                } else {<br />                    $folder = $locale['default'];<br />                }<br />            }<br /><br />            foreach ($files as $file) {<br />                $this -&gt; CI -&gt; lang -&gt; load($file, $folder);<br />            }<br />            <br />            $this -&gt; loaded = TRUE;<br />        }<br />    }<br />    <br />    /<strong><br />     * Prevent CI Hook to auto load language file<br />     <em><br />     * @access  public<br />     * @return  void<br />     </em>/<br />    public function prevent_auto(){<br />        $this -&gt; auto = FALSE;<br />    }<br />    <br />    /</strong><br />     * Set current user locale and save locale to cookies<br />     <em><br />     * @access  public<br />     * @Param   string      the locale string: en-US, en-UK, zh-TW, zh-CN<br />     * @Param   integer     the cookies value expire time, default is 30 day<br />     * @Param   string      cookies key<br />     * @return  void<br />     </em>/<br />    public function set_current_locale($locale, $expire = 259200, $cookie_key = 'locale') {<br />        setcookie($cookie_key, $locale, time() + $expire);<br />        $this -&gt; locale = $locale;<br />    }<br />    <br />    /<strong><br />     * Get current user locale<br />     <em><br />     * @access  public<br />     * @Param   string      cookies key, if you changed the key at set_current_locale, please assign it<br />     * @return  string<br />     </em>/<br />    public function get_current_locale($cookie_key = 'locale') {<br />        if (!$this -&gt; locale){<br />            if (isset($<em>COOKIE[$cookie_key])) {<br />                $lang = $</em>COOKIE[$cookie_key];<br />            } else {<br />                if (isset($<em>SERVER['HTTP_ACCEPT_LANGUAGE'])) {<br />                    $lang = substr($</em>SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 5);<br />                } else {<br />                    $language = $this -&gt; get_language_config();<br />                    $lang = $language['default_locale'];<br />                }<br />            }<br />            $this -&gt; locale = $lang;<br />        }<br />        return $this -&gt; locale;<br />    }<br />    <br />    /</strong><br />     * Get configuration values<br />     <em><br />     * @access  default<br />     * @return  array<br />     </em>/<br />    function get_language_config(){<br />        $this -&gt; CI -&gt; config -&gt; load('i18n');<br />        return $this -&gt; CI -&gt; config -&gt; item('language');<br />    }<br />    <br />}<br /><br />/<em> End of file I18n.php </em>/<br />/<em> Location: ./application/libraries/I18N.php </em>/<br /></pre><br />以下的是所需要的設定檔案 <b>i18n.php (Core)</b>，放到 <b>application/config/i18n.php</b>。<br /><pre class="brush:php">&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');<br /><br />/<em><em><br /> * I18n library configuration file<br /> </em><br /> * @package     CodeIgniter<br /> * @subpackage  Libraries<br /> * @category    Libraries<br /> * @author      Lawrence Cheung<br /> * @version     1.0<br /> * @link        https://github.com/lawrence0819<br /> </em>/<br /><br />//Add file in this array, if you want I18n library auto load them<br />$config['language']['files'] = array('messages');<br /><br />//If user locale not found, set this valus as a defaul user locale<br />$config['language']['default_locale'] = 'en';<br /><br />//Default language folder, if locale folder not found<br />$config['language']['locale']['default'] = 'tchinese';<br /><br />//zh-CN locale mapped to schinese folder<br />$config['language']['locale']['zh-CN'] = 'schinese';<br /><br />//zh-TW locale mapped to tchinese folder<br />$config['language']['locale']['zh-TW'] = 'tchinese';<br /><br />//en locale mapped to schinese folder<br />$config['language']['locale']['en'] = 'english';<br /><br />/<em> End of file i18n.php </em>/<br />/<em> Location: ./application/config/i18n.php </em>/<br /></pre><br />英文語言檔 <b>messages_lang.php</b>，放到 <b>application/language/english/messages_lang.php</b><br /><pre class="brush:php">&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');<br /><br />$lang['site_name'] = 'Example site';<br />$lang['message'] = 'Hello World!';<br /><br />/<em> End of file messages_lang.php </em>/<br />/<em> Location: ./application/language/english/messages_lang.php </em>/<br /></pre><br />正體中文語言檔 <b>messages_lang.php</b>，放到 <b>application/language/tchinese/messages_lang.php</b><br /><pre class="brush:php">&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');<br /><br />$lang['site_name'] = '範例網站';<br />$lang['message'] = '世界，你好！';<br /><br />/<em> End of file messages_lang.php </em>/<br />/<em> Location: ./application/language/tchinese/messages_lang.php </em>/<br /></pre><br />簡體中文語言檔 <b>messages_lang.php</b>，放到 <b>application/language/schinese/messages_lang.php</b><br /><pre class="brush:php">&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');<br /><br />$lang['site_name'] = '范例网站';<br />$lang['message'] = '世界，你好！';<br /><br />/<em> End of file messages_lang.php </em>/<br />/<em> Location: ./application/language/schinese/messages_lang.php </em>/<br /></pre><br /><br />設定就完成了，如果你有更多語言或不使用 <b>english</b>，<b>tchinese</b>，<b>schinese</b> 的名稱，請更改 <b>application/config/i18n.php</b>。<br /><br /><br />使用方法如下:<br /><br />手動選擇語言的 <b>Controller</b>:<br /><pre class="brush:php">&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');<br /><br />class I18nmanual extends CI_Controller{<br /><br />    public function </strong>construct(){<br />        parent::<strong>construct();<br />        $this -&gt; load -&gt; library('i18n');<br />    }<br />    <br />    public function index(){<br />        $this -&gt; i18n -&gt; load_language();<br />        $this -&gt; load -&gt; view('i18ntest');<br />    }<br />    <br />}<br /><br />/<em> End of file i18nmanual.php </em>/<br />/<em> Location: ./application/controller/i18nmanual.php </em>/<br /></pre><br /><b>View</b>:<br /><pre class="brush:php">&lt;html&gt;<br />    &lt;head&gt;<br />        &lt;title&gt;&lt;?php echo $this-&gt;lang-&gt;line('site_name'); ?&gt;&lt;/title&gt;<br />    &lt;/head&gt;<br />    &lt;body&gt;<br />        &lt;?php echo $this-&gt;lang-&gt;line('message'); ?&gt;<br />    &lt;/body&gt;<br />&lt;/html&gt;<br /></pre><br />將會見到和 <b>Browser</b> 相對應的語言。<br /><br />如果覺得要在 </strong>construct 內加上<br /><pre class="brush:php">$this -&gt; load -&gt; library('i18n');<br /></pre><br />太麻煩，可以在 <b>application/config/autoload.php</b> 自動載入 <b>i18n library</b>:<br /><pre class="brush:php">$autoload['libraries'] = array('i18n');<br /></pre><br />開啟全自動的功能要先在 <b>application/config/config.php</b> 更改以下程式碼:<br /><pre class="brush:php">$config['enable_hooks'] = TRUE;<br /></pre><br />再將 <b>application/config/hooks.php</b> 加入以下程式碼:<br /><pre class="brush:php">$hook['post_controller_constructor'][] = array(<br />                                'class'    =&gt; 'I18n',<br />                                'function' =&gt; 'auto_load_language',<br />                                'filename' =&gt; 'I18n.php',<br />                                'filepath' =&gt; 'libraries'<br />                                );<br /></pre><br /><b>Controller</b>:<br /><pre class="brush:php">&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');<br /><br />class I18nauto extends CI_Controller{<br /><br />    public function <strong>construct(){<br />        parent::</strong>construct();<br />        $this -&gt; load -&gt; library('i18n');<br />    }<br />    <br />    public function index(){<br />        $this -&gt; load -&gt; view('i18ntest');<br />    }<br />    <br />}<br /><br />/<em> End of file i18nauto.php </em>/<br />/<em> Location: ./application/controller/i18nauto.php </em>/<br /></pre><br />如果有設定自動載入 <b>i18n library</b>，就連 <b><strong>construct</b> 也不需要。<br /><br />如果開啟了全自動的功能，但有些 <b>Controller</b> 又不想自動選擇語言，可以在 <b></strong>construct</b> 加上:<br /><pre class="brush:php">&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');<br /><br />class I18nmanual extends CI_Controller{<br /><br />    public function <strong>construct(){<br />        parent::</strong>construct();<br />        $this -&gt; load -&gt; library('i18n');<br />        //prevent auto load language<br />        $this -&gt; i18n -&gt; prevent_auto();<br />    }<br />    <br />    public function index(){<br />        $this -&gt; i18n -&gt; set_current_locale('zh-TW');<br />        $this -&gt; i18n -&gt; load_language();<br />        $this -&gt; load -&gt; view('i18ntest');<br />    }<br />    <br />}<br /><br />/<em> End of file i18nmanual.php </em>/<br />/<em> Location: ./application/controller/i18nmanual.php </em>/<br /></pre><br />一經切換的語系，就會自動將此更改儲存到 <b>Cookies</b>，下一次就會以 <b>Cookies</b> 的語系來選擇語言檔。<br /><br />說明完畢，有什麼問題可以留言給我。<div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-5619452461244676124?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[安裝 Drupal 6]]></title>
    <link href="http://pro.ctlok.com/2010/06/install-drupal-6.html"/>
    <updated>2010-06-25T11:55:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/06/install-drupal-6</id>
    <content type="html"><![CDATA[<p>公司近來有新的項目，希望使用 CMS (Content Management System) 去快速替客戶建成一個網站，本來是想使用 <a href="http://www.joomla.org/">Joomla!</a> 這套 CMS 的，但我沒有使用這一套 CMS 的經驗，後來我便建議使用 Drupal。<br /><br />Drupal 網址: <a href="http://drupal.org/">http://drupal.org/</a><br /><br />想試試使用的網友可以下載 XAMPP 這套整合了 Apache、PHP 和 MySQL 的伺服器套件。免得又要安裝 Apache、PHP 和 MySQL，而且這款伺服器套件是不用安裝的，解壓後即可使用。<br />網址: <a href="http://www.apachefriends.org/en/xampp.html">http://www.apachefriends.org/en/xampp.html</a><br /><br />在下面的安裝過程我也是使用 XAMPP 的。<br /><br />首先打開 <a href="http://localhost/phpmyadmin">http://localhost/phpmyadmin/</a>，建立新資料庫名為 drupal。<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://1.bp.blogspot.com/_fDN8R2Wgbcs/TCQiioAmSaI/AAAAAAAAAhs/cgmTJZ3qhX0/s1600/install-drupal-1.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="38" src="http://1.bp.blogspot.com/_fDN8R2Wgbcs/TCQiioAmSaI/AAAAAAAAAhs/cgmTJZ3qhX0/s320/install-drupal-1.gif" width="320" /></a></div><br />在上傳&nbsp;Drupal&nbsp;上伺服器前先要將 sites/default/default.settings.php 複製一份，命名 setting.php，然後放在同一目錄內。Drupal 會將所有設定寫到 setting.php 內。<br /><br />將 Drupal 所有檔案上傳上伺服器後，打開 <a href="http://localhost/drupal/install.php">http://localhost/drupal/install.php</a>。<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/_fDN8R2Wgbcs/TCQgcMfSn-I/AAAAAAAAAho/MqhUJ99MGok/s1600/install-drupal.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="136" src="http://3.bp.blogspot.com/_fDN8R2Wgbcs/TCQgcMfSn-I/AAAAAAAAAho/MqhUJ99MGok/s320/install-drupal.gif" width="320" /></a></div><br />然後按 Install Drupal in English。<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/_fDN8R2Wgbcs/TCQi7ZZTnlI/AAAAAAAAAhw/QsD6BoeOi6E/s1600/install-drupal-2.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="216" src="http://3.bp.blogspot.com/_fDN8R2Wgbcs/TCQi7ZZTnlI/AAAAAAAAAhw/QsD6BoeOi6E/s320/install-drupal-2.gif" width="320" /></a></div><br />輸入剛才建立的資料庫名稱並輸入用戶名稱和密碼 (XAMPP 的 MySQL 的 root 預設是沒有密碼的，在真實環境請確保 root 或其他用戶有密碼保護。) 。 如果你的資料庫不是在 localhost ，請按下 Advanced options 去設定。<br /><br />按下 Save and continue 去下一步。<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://2.bp.blogspot.com/_fDN8R2Wgbcs/TCQk_4t7D8I/AAAAAAAAAh0/e13mRtoaEFk/s1600/install-drupal-3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://2.bp.blogspot.com/_fDN8R2Wgbcs/TCQk_4t7D8I/AAAAAAAAAh0/e13mRtoaEFk/s320/install-drupal-3.png" width="299" /></a></div><ol><li>輸入網站名稱</li><li>網站郵件地址</li><li>建立管理員用戶</li><li>密碼盡量要複雜一些，最好選擇包括英文大小寫、數字和符號的密碼。</li></ol><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/_fDN8R2Wgbcs/TCQl79s7bEI/AAAAAAAAAh4/3zfe9nY4Xgs/s1600/install-drupal-4.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="256" src="http://3.bp.blogspot.com/_fDN8R2Wgbcs/TCQl79s7bEI/AAAAAAAAAh4/3zfe9nY4Xgs/s320/install-drupal-4.png" width="320" /></a></div><br />Server setting 其中一項 Clean URLs 可以令到搜尋器優化了的網址，最好開啟這個功能。其他使用預設的就好了。<br /><br />按下 Save and continue 去下一步。<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://1.bp.blogspot.com/_fDN8R2Wgbcs/TCQm57TP6gI/AAAAAAAAAh8/OmRMffhHjRE/s1600/install-drupal-5.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="149" src="http://1.bp.blogspot.com/_fDN8R2Wgbcs/TCQm57TP6gI/AAAAAAAAAh8/OmRMffhHjRE/s320/install-drupal-5.png" width="320" /></a></div><br />完成安裝過程了，出現錯誤是因為我沒有設定好 SMTP 服務。但也不會影響正常操作。<br /><br />相關書籍:&nbsp;<a href="http://www.amazon.com/Using-Drupal-Angela-Byron/dp/0596515804?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Using Drupal" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=0596515804&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0596515804" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/Drupal-Dummies-Lynn-Beighley/dp/0470556110?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Drupal For Dummies" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=0470556110&amp;tag=program06-20" /></a><a href="http://www.amazon.com/Drupal-Development-Second-John-VanDyk/dp/1430209895?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Pro Drupal Development, Second Edition" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1430209895&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1430209895" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0470556110" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-432566512679223633?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CodeIgniter 隱藏 index.php]]></title>
    <link href="http://pro.ctlok.com/2010/06/codeigniter-hide-indexphp.html"/>
    <updated>2010-06-11T11:40:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/06/codeigniter-hide-indexphp</id>
    <content type="html"><![CDATA[<p>CodeIgniter 打開 Controller 時 URL 會像以下這樣:<br /><pre class="brush: text">http://ci.ctlok.com/index.php/controller<br /></pre><br />夾了 index.php 在中間，非常不美觀。<br /><br />在 Apache Web Server 上可以使用 URL Rewirte 去將 index.php 去除掉，只要將以下 .htaccess 放到CodeIgniter index.php 的所在的目錄便可以。<br /><br />.htaccess:<br /><pre class="brush: text">&lt;IfModule mod_rewrite.c&gt;<br />    Options +FollowSymLinks<br />    RewriteEngine on<br />    RewriteBase /<br />    RewriteCond $1 !<sup>(index.php|images|robots.txt)&lt;br</sup> />    RewriteCond %{REQUEST_FILENAME} !-f<br />    RewriteCond %{REQUEST_FILENAME} !-d<br />    RewriteRule ^(.*)$ index.php/$1 [QSA,L]<br />&lt;/IfModule&gt;<br /></pre><br />如果 CodeIgniter index.php 的所在的目錄並不是根目錄，可以修改<br /><pre class="brush: text">RewriteBase /<br /></pre>成為<br /><pre class="brush: text">RewriteBase /foldername<br /></pre><br />如果有其他目錄不想 Apache 去重寫 URL，例用: js 目錄。可以將<br /><pre class="brush: text">RewriteCond $1 !<sup>(index.php|images|robots.txt)&lt;br</sup> /></pre>加上 js<br /><pre class="brush: text">RewriteCond $1 !<sup>(index.php|images|robots.txt|js)&lt;br</sup> /></pre><br />現在可以以這種形式打開 Controller 了<br /><pre class="brush: text">http://ci.ctlok.com/controller<br /></pre><br />URL 看上去美觀得多了。<br /><br />相關書籍: <a imageanchor="1" target="_blank"  href="http://www.amazon.com/CodeIgniter-1-7-Jose-Argudo/dp/1847199488?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="CodeIgniter 1.7" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1847199488&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1847199488" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/CODEIGNITER-PROFESSIONAL-DEVELOPMENT-Adam-Griffith/dp/1849510903?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="CODEIGNITER 1.7 PROFESSIONAL DEVELOPMENT" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1849510903&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1849510903" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/Professional-CodeIgniter-Thomas-Myer/dp/0470282452?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="Professional CodeIgniter" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=0470282452&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=0470282452" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-845534242680379496?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PHP Framework - CodeIgniter]]></title>
    <link href="http://pro.ctlok.com/2010/06/php-framework-codeigniter.html"/>
    <updated>2010-06-07T12:13:00+08:00</updated>
    <id>http://pro.ctlok.com/2010/06/php-framework-codeigniter</id>
    <content type="html"><![CDATA[<p>最近要替公司制作一個小型網站，便到 GoDaddy 申請 Domain Name，因為 Domain Name 連 Hosting 服務一起購買會便宜很多，所以順便看看 GoDaddy 的 Hosting 服務。我看到 Linux 主機詳細支援有列出 Servlet/JSP，心想那麼好便試試吧，怎知我的 JSP 連打印 Hello World 出來也不能，Server 不能將我的 JSP 編譯，真奇怪(有那位網友知道怎麼解決嗎？)。最後唯有改用 PHP。以前寫 PHP 時不會理什麼 MVC 架構，快點完成便可以，但現在又接受不到那種混亂的格式，上網找尋一下發現 PHP Framework 有數十種，沒可能每一個也去試吧，經朋友介紹下使用了 CodeIgniter 這套 Framework，在這裡記錄安裝步驟。<br /><br />官方網址: <a href="http://codeigniter.com/">CodeIgniter</a><br /><br />下載網址: <a href="http://codeigniter.com/download.php">Download</a><br /><br />下載完成並解壓縮後會有 system 目錄、user_guide 目錄、index.php 和 license.txt，為了提高安全性，請將 system 目錄變更為其他名稱，例如: pro_ctlok_system。變更名稱後打開 index.php 更改參數，將 <br /><pre class="brush: php">$system_folder = &quot;system&quot;; <br /></pre><br />變更為:<br /><pre class="brush: php">$system_folder = &quot;pro_ctlok_system&quot;;<br /></pre><br />現在設定網站的 Domain name，打開 pro_ctlok_system/application/config/config.php 更改參數，將<br /><pre class="brush: php">$config[&#39;base_url&#39;] = &quot;http://example.com/&quot;;<br /></pre><br />變更為網站的 Domain name:<br /><pre class="brush: php">$config[&#39;base_url&#39;] = &quot;pro.ctlok.com&quot;;<br /></pre><br />要使用到 Database 的可以打開 pro_ctlok_system/application/config/database.php 做一些設定:<br /><pre class="brush: php">$db[&#39;default&#39;][&#39;hostname&#39;] = &quot;localhost&quot;;<br />$db[&#39;default&#39;][&#39;username&#39;] = &quot;lawrence&quot;;<br />$db[&#39;default&#39;][&#39;password&#39;] = &quot;123456&quot;;<br />$db[&#39;default&#39;][&#39;database&#39;] = &quot;ctlok&quot;;<br />$db[&#39;default&#39;][&#39;dbdriver&#39;] = &quot;mysql&quot;;<br />$db[&#39;default&#39;][&#39;dbprefix&#39;] = &quot;&quot;;<br />$db[&#39;default&#39;][&#39;pconnect&#39;] = TRUE;<br />$db[&#39;default&#39;][&#39;db_debug&#39;] = TRUE;<br />$db[&#39;default&#39;][&#39;cache_on&#39;] = FALSE;<br />$db[&#39;default&#39;][&#39;cachedir&#39;] = &quot;&quot;;<br />$db[&#39;default&#39;][&#39;char_set&#39;] = &quot;utf8&quot;;<br />$db[&#39;default&#39;][&#39;dbcollat&#39;] = &quot;utf8_general_ci&quot;;<br /></pre><br />CodeIgniter 亦支援自動連接 Database，打開 pro_ctlok_system/application/config/autoload.php 更改參數，將<br /><pre class="brush: php">$autoload['libraries'] = array();<br /></pre><br />變更為<br /><pre class="brush: php">$autoload['libraries'] = array('database');<br /></pre><br />現在可以將 pro_ctlok_system 目錄和 index.php 放到網站的根目錄，然後打開 index.php 看看是否出現 CodeIgniter 的歡迎頁面。<br /><br /><strong><em>使用 GoDaddy Hosting 服務要作出以下更改</em></strong><br /><br />使用上面的設定然後放上 GoDaddy Hosting 是不行的，雖然打開 index.php 出現 CodeIgniter 的歡迎頁面， 但其他Controller 是不能正常運作的。<br /><br />打開 config.php 更改以下參數:<br /><pre class="brush: php">$config[&#39;index_page&#39;] = &quot;index.php?&quot;;<br />$config[&#39;uri_protocol&#39;] = &quot;QUERY_STRING&quot;;<br /></pre><br />然後在根目錄新增 .htaccess 檔案並輸入以下內容:<br /><pre class="brush: text">RewriteEngine on<br />RewriteCond %{REQUEST_FILENAME} !-f<br />RewriteCond %{REQUEST_FILENAME} !-d<br />RewriteRule ^(.*)$ /index.php?$1 [L]<br /></pre><br />現在可以以這種方式打開 Controller 了<br /><pre class="brush: text">http://pro.ctlok.com/controller/action/etc<br /></pre><br />相關書籍: <a imageanchor="1" target="_blank"  href="http://www.amazon.com/CodeIgniter-Rapid-PHP-Application-Development/dp/1847191746?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="CodeIgniter for Rapid PHP Application Development: Improve your PHP coding productivity with the free compact open-source MVC CodeIgniter framework!" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1847191746&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1847191746" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/Professional-CodeIgniter-Thomas-Myer/dp/0470282452?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="Professional CodeIgniter" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=0470282452&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=0470282452" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/CodeIgniter-professional-development-Adam-Griffith/dp/1849510903?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="CodeIgniter 1.7 professional development" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1849510903&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1849510903" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-4800080292002533507?l=lawpronotes.blogspot.com' alt='' /></div></p>
]]></content>
  </entry>
  
</feed>
