
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Programming Design Notes</title>
  <meta name="author" content="Lawrence Cheung">

  
  <meta name="description" content="首先資料庫內的表格名稱最好為英文小寫，因為 PostgreSQL 會自動將表格名稱轉為小寫。例子:INSERT INTO public.User (id, name, password) VALUES (1, 'Lawrence', '123456')會變成:INSERT INTO public. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pro.ctlok.com/blog/page/18/index.html">
  <link href="/favicon.ico" rel="icon">
  
  <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="/assets/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
  <link href="/assets/bootstrap/css/custom.min.css" rel="stylesheet" type="text/css">
  <link href="/assets/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="/assets/google-code-prettify/css/prettify.css" rel="stylesheet" type="text/css">
  
  <link href="http://feeds.feedburner.com/proctlok" rel="alternate" title="Programming Design Notes" type="application/atom+xml">
  
  <!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
  
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-16811171-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    data-spy="scroll">

    <a href="https://github.com/lawrence0819" target="_blank">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
    </a>
    <div class="container">
        <header class="jumbotron subhead" id="overview">
            <div class="subscribe">
    <table>
        <tr>
            <td><a href="http://feeds.feedburner.com/proctlok" target="_blank"><img src="/images/socialize-icons/64x64/rss.png" /></td>
            <td><a href="https://www.facebook.com/pages/Programming-Design-Notes/134507029896063" target="_blank"><img src="/images/socialize-icons/64x64/facebook.png" /></a></td>
            <td><a href="http://twitter.com/proctlok" target="_blank"><img src="/images/socialize-icons/64x64/twitter.png" /></a></td>
        </tr>
    </table>
</div>
<h1 class="title">Programming Design Notes</h1>

            <div class="navbar">
    <div class="navbar-inner">
        <div class="container" style="width: auto;">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li>
                        <a href="/"><i class="icon icon-home"></i>Home</a>
                    </li>
                    <li>
                        <a href="/blog/archives"><i class="icon icon-book"></i>Blog</a>
                    </li>
                </ul>
                
                <form action="http://google.com/search" method="get" class="navbar-search pull-right">
                    <fieldset role="search">
                        <input type="hidden" name="q" value="site:pro.ctlok.com" />
                        <input type="text" name="q" results="0" placeholder="Search" class="span3" />
                    </fieldset>
                </form>
                
            </div><!-- /.nav-collapse -->
        </div>
    </div><!-- /navbar-inner -->
</div>

        </header>
        <div id="main">
            <div id="content">
                <div class="row">
    <div class="span8">
        <div class="blog-index">
          
          
          
            <article>
              
  <header>
    
      <h2 class="entry-title"><a href="/2010/04/jpa-postgresql.html">使用 JPA 連接 PostgreSQL</a></h2>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-09T14:37:00+08:00" pubdate data-updated="true">Apr 9<span>th</span>, 2010</time>
        
         | <a href="/2010/04/jpa-postgresql.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">首先資料庫內的表格名稱最好為英文小寫，因為 PostgreSQL 會自動將表格名稱轉為小寫。<br />例子:<br /><pre class="brush: sql">INSERT INTO public.User (id, name, password) VALUES (1, 'Lawrence', '123456')<br /></pre><br />會變成:<br /><pre class="brush: sql">INSERT INTO public.user (id, name, password) VALUES (1, 'Lawrence', '123456')<br /></pre><br />這樣便會找不到表格而出錯。<br />以下這種寫法才可以順利找到表格。<br /><pre class="brush: sql">INSERT INTO public.&quot;User&quot; (id, name, password) VALUES (1, 'Lawrence', '123456')<br /></pre><br />需要將 User 用 &quot; 包起來才可以，而 JPA 中插入資料時，程式最終也會將物件變為 SQL 才能將資料加入或取出。JPA 並不會自動將表格名稱用 &quot; 包起來。<br /><br />Entity 例子:<br /><pre class="brush: java">package com.blogspot.lawpronotes.entity;<br /><br />import java.io.Serializable;<br /><br />import javax.persistence.Column;<br />import javax.persistence.Entity;<br />import javax.persistence.Id;<br />import javax.persistence.Table;<br /><br />/**<br /> * The persistent class for the user database table.<br /> * <br /> */<br />@Entity<br />@Table(name = &quot;user&quot;, schema = &quot;public&quot;)<br />public class User implements Serializable {<br />    private static final long serialVersionUID = 1L;<br /><br />    @Id<br />    @Column(name = &quot;id&quot;)<br />    private Integer id;<br /><br />    @Column(name = &quot;name&quot;)<br />    private String name;<br /><br />    @Column(name = &quot;password&quot;)<br />    private String password;<br /><br />    public User() {<br />    }<br /><br />    public Integer getId() {<br />        return this.id;<br />    }<br /><br />    public void setId(Integer id) {<br />        this.id = id;<br />    }<br /><br />    public String getName() {<br />        return this.name;<br />    }<br /><br />    public void setName(String name) {<br />        this.name = name;<br />    }<br /><br />    public String getPassword() {<br />        return this.password;<br />    }<br /><br />    public void setPassword(String password) {<br />        this.password = password;<br />    }<br /><br />}<br /></pre><br />如果表格名稱是大寫又不能改的話，只好將<br /><pre class="brush: java">@Table(name=&quot;user&quot;, schema=&quot;public&quot;)<br /></pre>改為<br /><pre class="brush: java">@Table(name=&quot;\&quot;User\&quot;&quot;, schema=&quot;public&quot;)<br /></pre><br />Column 名稱也一樣，將<br /><pre class="brush: java">@Column(name = &quot;name&quot;)<br /></pre>改為<br /><pre class="brush: java">@Column(name = &quot;\&quot;Name\&quot;&quot;)<br /></pre><br />相關書籍: <a imageanchor="1" target="_blank"  href="http://www.amazon.com/PostgreSQL-8-4-Official-Documentation-Language/dp/1596821582?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="PostgreSQL 8.4 Official Documentation - Volume I. The SQL Language" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1596821582&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1596821582" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/PostgreSQL-8-4-Official-Documentation-Administration/dp/1596821590?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="PostgreSQL 8.4 Official Documentation - Volume II. Server Administration" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1596821590&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1596821590" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/PostgreSQL-8-4-Official-Documentation-Programming/dp/1596821604?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="PostgreSQL 8.4 Official Documentation - Volume III. Server Programming" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=1596821604&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=1596821604" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-7358375987171526715?l=lawpronotes.blogspot.com' alt='' /></div>
</div>
  
  


            </article>
            <hr />
          
          
            <article>
              
  <header>
    
      <h2 class="entry-title"><a href="/2010/04/mysql-text-blob.html">MySQL Text, Blob 大小</a></h2>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-08T22:41:00+08:00" pubdate data-updated="true">Apr 8<span>th</span>, 2010</time>
        
         | <a href="/2010/04/mysql-text-blob.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">TINYTEXT, TINYBLOB: 256 bytes<br /><br />TEXT, BLOB: 65,535 bytes = 64kb<br /><br />MEDIUMTEXT, MEDIUMBLOB: 16,777,215 bytes = 16MB<br /><br />LONGTEXT, LONGBLOB: 4,294,967,295 bytes = 4GB<br /><br />相關書籍: <a imageanchor="1" target="_blank"  href="http://www.amazon.com/High-Performance-MySQL-Optimization-Replication/dp/0596101716?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="High Performance MySQL: Optimization, Backups, Replication, and More" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=0596101716&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=0596101716" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/MySQL-4th-Paul-DuBois/dp/0672329387?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="MySQL (4th Edition)" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=0672329387&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=0672329387" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><a imageanchor="1" target="_blank"  href="http://www.amazon.com/Learning-MySQL-Seyed-Saied-Tahaghoghi/dp/0596008643?ie=UTF8&tag=program06-20&link_code=bil&camp=213689&creative=392969"><img alt="Learning MySQL" src="http://ws.amazon.com/widgets/q?MarketPlace=US&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&ASIN=0596008643&tag=program06-20" /></a><img src="http://www.assoc-amazon.com/e/ir?t=program06-20&l=bil&camp=213689&creative=392969&o=1&a=0596008643" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-3160975434761094459?l=lawpronotes.blogspot.com' alt='' /></div>
</div>
  
  


            </article>
            <hr />
          
          
            <article>
              
  <header>
    
      <h2 class="entry-title"><a href="/2010/04/glassfish-v3-remote-ejb.html">GlassFish V3 Remote EJB</a></h2>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-08T11:13:00+08:00" pubdate data-updated="true">Apr 8<span>th</span>, 2010</time>
        
         | <a href="/2010/04/glassfish-v3-remote-ejb.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">首先制作 EJB 部份。制作一個 MessageRemote 的介面，然後再實作這個介面。<br />** EJB 3.1 不再需要 Local 的介面 **<br /><br />MessageRemote:<br /><pre class="brush: java">package com.blogspot.lawpronotes.ejb;<br />import javax.ejb.Remote;<br /><br />@Remote<br />public interface MessageRemote {<br />    public String sayHello();<br />}<br /></pre><br />Message:<br /><pre class="brush: java">package com.blogspot.lawpronotes.ejb;<br /><br />import javax.ejb.EJB;<br />import javax.ejb.LocalBean;<br />import javax.ejb.Stateless;<br /><br />/**<br /> * Session Bean implementation class Message<br /> */<br />@LocalBean<br />@Stateless<br />@EJB(name="java:global/HelloWorldEJB/Message", beanInterface=MessageRemote.class)<br />public class Message implements MessageRemote {<br /><br />    /**<br />     * Default constructor. <br />     */<br />    public Message() {<br />        // TODO Auto-generated constructor stub<br />    }<br /><br />    @Override<br />    public String sayHello() {<br />        // TODO Auto-generated method stub<br />        return "Hello World";<br />    }<br />    <br />}<br /></pre><br />現在可以將 EJB Project 放到 GlassFish 上，然後制作一個 JAR 並將 EJB 的 Remote 介面放到 JAR 內，緊記不要連同實作的 Class 放到 JAR 內，不然會發生錯誤。<br /><br />現在制作 Servlet 部份。將剛才制作好的 JAR 放到 WEB-INF/lib 內。<br />新增一個 IndexServlet ，複製以下程式碼並貼上。<br /><pre class="brush: java">package com.blogspot.lawpronotes.servlet;<br /><br />import java.io.IOException;<br />import java.io.PrintWriter;<br />import java.util.Properties;<br /><br />import javax.naming.InitialContext;<br />import javax.naming.NamingException;<br />import javax.rmi.PortableRemoteObject;<br />import javax.servlet.ServletException;<br />import javax.servlet.annotation.WebServlet;<br />import javax.servlet.http.HttpServlet;<br />import javax.servlet.http.HttpServletRequest;<br />import javax.servlet.http.HttpServletResponse;<br /><br />import com.blogspot.lawpronotes.ejb.MessageRemote;<br /><br />/**<br /> * Servlet implementation class IndexServlet<br /> */<br />@WebServlet(name = &quot;Index&quot;, urlPatterns = { &quot;/index&quot; })<br />public class IndexServlet extends HttpServlet {<br />    private static final long serialVersionUID = 1L;<br />    private Properties properties;<br /><br />    /**<br />     * @see HttpServlet#HttpServlet()<br />     */<br />    public IndexServlet() {<br />        super();<br />        // TODO Auto-generated constructor stub<br />        properties = new Properties();<br />        properties.put(&quot;java.naming.factory.initial&quot;,<br />                &quot;com.sun.enterprise.naming.impl.SerialInitContextFactory&quot;);<br />        properties.put(&quot;java.naming.factory.url.pkgs&quot;,<br />                &quot;com.sun.enterprise.naming&quot;);<br />        properties.put(&quot;java.naming.factory.state&quot;,<br />                &quot;com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl&quot;);<br />        properties.setProperty(&quot;org.omg.CORBA.ORBInitialHost&quot;, &quot;localhost&quot;);<br />        properties.setProperty(&quot;org.omg.CORBA.ORBInitialPort&quot;, &quot;3700&quot;);<br />    }<br /><br />    protected void doGet(HttpServletRequest request,<br />            HttpServletResponse response) throws ServletException, IOException {<br />        // TODO Auto-generated method stub<br />        PrintWriter out = response.getWriter();<br />        try {<br />            InitialContext context = new InitialContext(properties);<br />            Object obj = context.lookup(&quot;java:global/HelloWorldEJB/Message&quot;);<br />            MessageRemote message = (MessageRemote) PortableRemoteObject<br />                    .narrow(obj, MessageRemote.class);<br />            out.print(message.sayHello());<br />        } catch (NamingException e) {<br />            // TODO Auto-generated catch block<br />            e.printStackTrace();<br />            out.print(e.toString());<br />        }<br />    }<br /><br />    protected void doPost(HttpServletRequest request,<br />            HttpServletResponse response) throws ServletException, IOException {<br />        // TODO Auto-generated method stub<br />    }<br />}<br /></pre><br />web.xml 設定如下:<br /><pre class="brush: xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br /> xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"<br /> xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"<br /> id="WebApp_ID" version="2.5"&gt;<br /> &lt;display-name&gt;HelloWorldWAR&lt;/display-name&gt;<br /> &lt;welcome-file-list&gt;<br />  &lt;welcome-file&gt;index&lt;/welcome-file&gt;<br />  &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;<br />  &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;<br />  &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;<br />  &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;<br />  &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;<br />  &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;<br /> &lt;/welcome-file-list&gt;<br />&lt;/web-app&gt;<br /></pre><br />現在將 WAR Project 放上 GlassFish。再打開 IndexServlet 應該會出現 Hello World 字樣。<br /><br />單機 Java 應用程式也是差不多的做法，但一有點要注意的是要將 GlassFish 的 appserv-rt.jar 加到單機 Java 應用程式下，才能正確地用到 Remote EJB。當然 EJB 的 JAR 也是必需的。<br />** appserv-rt.jar 在 GlassFish 的 lib 資料夾內 **<br /><br />Main:<br /><pre class="brush: java">package com.blogspot.lawpronotes.app;<br /><br />import java.util.Properties;<br /><br />import javax.naming.InitialContext;<br />import javax.naming.NamingException;<br />import javax.rmi.PortableRemoteObject;<br /><br />import com.blogspot.lawpronotes.ejb.MessageRemote;<br /><br />public class Main {<br />    public static void main(String[] args) throws NamingException{<br />        Properties properties = new Properties();<br />        properties.put("java.naming.factory.initial", "com.sun.enterprise.naming.impl.SerialInitContextFactory");<br />        properties.put("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");<br />        properties.put("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");<br />        properties.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");<br />        properties.setProperty("org.omg.CORBA.ORBInitialPort", "3700");<br />        InitialContext context = new InitialContext(properties);<br />        Object obj = context.lookup("java:global/HelloWorldEJB/Message");<br />        MessageRemote message = (MessageRemote)PortableRemoteObject.narrow(obj, MessageRemote.class);<br />        System.out.println(message.sayHello());<br />    }<br />}<br /></pre><br />在 Console 會看見 Hello World 字樣。<br /><br />Eclipse 範例在這裡下載:&nbsp;<a href="http://sites.google.com/site/lawrencespace/lawpronotes/download/RemoteEJB.zip">RemoteEJB.zip</a><br /><br />相關書籍: <a href="http://www.amazon.com/Beginning-Java-trade-Platform-GlassFish/dp/1430219548?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Beginning Java™ EE 6 Platform with GlassFish™ 3: From Novice to Professional" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1430219548&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1430219548" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/Enterprise-JavaBeans-3-1-Andrew-Rubinger/dp/0596158025?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Enterprise JavaBeans 3.1" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=0596158025&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0596158025" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/Java-EE-Tutorial-I-4th/dp/0137081855?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Java EE 6 Tutorial, Volume I, The (4th Edition) (Java Series)" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=0137081855&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0137081855" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-8223294832797147627?l=lawpronotes.blogspot.com' alt='' /></div>
</div>
  
  


            </article>
            <hr />
          
          
            <article>
              
  <header>
    
      <h2 class="entry-title"><a href="/2010/03/windows-postgresql-84.html">在 Windows 手動移除 PostgreSQL 8.4</a></h2>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-31T11:57:00+08:00" pubdate data-updated="true">Mar 31<span>st</span>, 2010</time>
        
         | <a href="/2010/03/windows-postgresql-84.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">如果你在安裝&nbsp;PostgreSQL 中途發生錯誤，而又用不到 Uninstaller 去移除&nbsp;PostgreSQL，可以跟以下的步驟去手動移除然後重新安裝。<br /><ol><li>移除安裝目錄: <b>rd /s /q &#8220;C:\Program Files\PostgreSQL\8.4</b></li><li>移除 PostgreSQL 的用戶: <b>net user postgres /delete</b></li><li>移除在 Registry 的安裝資料: <b>HKEY_LOCAL_MACHINE\SOFTWARE\PostgreSQL\Installations\postgresql-8.4</b></li><li>移除在 Registry 的服務資料: <b>HKEY_LOCAL_MACHINE\SOFTWARE\PostgreSQL\Services\postgresql-8.4</b></li><li>移除 PostgreSQL 服務:&nbsp;<b>sc delete postgresql-8.4</b></li></ol><div>相關書籍:&nbsp;<a href="http://www.amazon.com/PostgreSQL-8-4-Official-Documentation-Language/dp/1596821582?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="PostgreSQL 8.4 Official Documentation - Volume I. The SQL Language" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1596821582&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1596821582" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/PostgreSQL-8-4-Official-Documentation-Programming/dp/1596821604?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="PostgreSQL 8.4 Official Documentation - Volume III. Server Programming" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1596821604&amp;tag=program06-20" /></a><a href="http://www.amazon.com/PostgreSQL-8-4-Official-Documentation-Administration/dp/1596821590?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="PostgreSQL 8.4 Official Documentation - Volume II. Server Administration" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1596821590&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1596821590" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1596821604" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-2876045594631775164?l=lawpronotes.blogspot.com' alt='' /></div>
</div>
  
  


            </article>
            <hr />
          
          
            <article>
              
  <header>
    
      <h2 class="entry-title"><a href="/2010/03/glassfish-v3-postgresql.html">GlassFish V3 配搭 PostgreSQL</a></h2>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-30T21:41:00+08:00" pubdate data-updated="true">Mar 30<span>th</span>, 2010</time>
        
         | <a href="/2010/03/glassfish-v3-postgresql.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">GlassFish v3 在這裡下載:&nbsp;<a href="https://glassfish.dev.java.net/public/downloadsindex.html#top">https://glassfish.dev.java.net/public/downloadsindex.html#top</a><br />PostgreSQL 8.x :&nbsp;<a href="http://www.postgresql.org/download/">http://www.postgresql.org/download/</a><br /><br />安裝 GlassFish 應該沒有什麼問題，但安裝 PostgreSQL 時要注意一點，不要選擇用預設語言，要選擇 English: United States，不然有機會在安裝時發生錯誤。<br /><br />安裝好後到這裡下載 JDBC Driver :&nbsp;<a href="http://jdbc.postgresql.org/download.html">http://jdbc.postgresql.org/download.html</a><br /><br />請選舉正確版本，安裝了 8.4 請下載 8.4 的 Driver。JDK 版本是 1.6 可下載 JDBC 4，1.5 下載 JDBC 3。<br />下載將檔案放到 GlassFish 的 lib 下，預設路徑是 C:\glassfishv3\glassfish\lib 。<br /><br />現在可以運行 GlassFish ，不然 GlassFish 會找不到 PostgreSQL 的 JDBC Driver。<br /><br />進入 GlassFish 的控制台:&nbsp;<a href="http://localhost:4848/">http://localhost:4848</a><br /><br />到 Resource -&gt; JDBC -&gt; Connection Pool<br /><br />新增一個 Pool。<br /><ul><li>Name:&nbsp;PostgreSQL&nbsp; </li><li>Resource Type: javax.sql.DataSource</li><li>Database Vender:&nbsp;Postgresql</li></ul><div>按下 Next。<br /><br /></div><div>在 Additional Properties 填寫以下資料。<br /><br /><ul><li>DatabaseName: postgres (如果你有安裝預設資料庫)</li><li>LoginTimeout: 0</li><li>Password: (安裝時所填寫私密碼)</li><li>PortNumber: 5432</li><li>PrepareThreshold: 5</li><li>ServerName: localhost</li><li>SocketTimeout: 0</li><li>Ssl: false</li><li>TcpKeepAlive: false</li><li>UnknownLength:&nbsp;2147483647</li><li>User: postgres</li></ul><div>按下 Finish，再返回剛剛新增的 Pool 裡按下 Ping，出現&nbsp;Ping Succeeded 即設置成功。</div><div>到 Resource -&gt; JDBC -&gt; JDBC Resource。</div><div><br /></div><div>新增&nbsp;JDBC Resource。</div><div><ul><li>JNDI Name:&nbsp;jdbc/PostgreSQL</li><li>Pool Name: PostgreSQL</li></ul><div>完成了。</div><div><br /></div><div>相關書籍:&nbsp;<a href="http://www.amazon.com/PostgreSQL-8-4-Official-Documentation-Language/dp/1596821582?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="PostgreSQL 8.4 Official Documentation - Volume I. The SQL Language" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1596821582&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1596821582" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/PostgreSQL-8-4-Official-Documentation-Programming/dp/1596821604?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="PostgreSQL 8.4 Official Documentation - Volume III. Server Programming" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1596821604&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1596821604" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /><a href="http://www.amazon.com/Beginning-Java-trade-Platform-GlassFish/dp/1430219548?ie=UTF8&amp;tag=program06-20&amp;link_code=bil&amp;camp=213689&amp;creative=392969" imageanchor="1" target="_blank"><img alt="Beginning Java™ EE 6 Platform with GlassFish™ 3: From Novice to Professional" src="http://ws.amazon.com/widgets/q?MarketPlace=US&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL160_&amp;ASIN=1430219548&amp;tag=program06-20" /></a><img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=program06-20&amp;l=bil&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=1430219548" style="border: none !important; margin: 0px !important; padding: 0px !important;" width="1" /></div></div></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/5998578522192555089-6278030940861626419?l=lawpronotes.blogspot.com' alt='' /></div>
</div>
  
  


            </article>
            <hr />
          
          <div class="pagination">
                <ul>
                    
                        <li>
                            <a class="prev" href="/blog/page/19/">&larr; Older</a>
                        </li>
                    
                        <li>
                            <a href="/blog/archives">Blog Archives</a>
                        </li>
                    
                        <li>
                            <a class="next" href="/blog/page/17/">Newer &rarr;</a>
                        </li>
                    
                </ul>
          </div>
        </div>
    </div>
    
    
  <div class="span4 sidebar">
      
        <section>
    <h2>About Me</h2>
    <div class="well">
        <p>Lawrence Cheung</p>
        <img src="/images/mail.png" />
    </div>
</section>
<section>
    <h2>Recent Posts</h2>
    <div class="well" style="padding: 8px 0;">
        <ul id="recent_posts" class="nav nav-list">
            
            <li class="post">
                <a href="/blog/2012/07/18/spring-integrate-jpa.html">Spring 整合 JPA</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/04/11/design-pattern-decorator.html">Design Pattern - Decorator</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/04/04/design-pattern-singleton.html">Design Pattern - Singleton</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/04/03/web-app-development-cheat-sheet.html">Web Development Cheat Sheet</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/04/03/maven-jetty-jsf-2.html">Maven + Jetty 測試  JSF 2 Annotation</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/04/02/design-pattern-abstract-factory.html">Design Pattern - Abstract Factory</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/04/02/design-pattern-factory.html">Design Pattern - Factory</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/03/30/maven-setup-jetty-dev-server.html">Maven Setup Jetty Development Server</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/03/29/design-pattern-observer.html">Design Pattern - Observer</a>
            </li>
            
            <li class="post">
                <a href="/blog/2012/03/28/design-pattern-strategy-pattern.html">Design Pattern - Strategy</a>
            </li>
            
        </ul>
    </div>
</section><section>
    <div id="recentcomment" class="dsq-widget">
        <h2 class="dsq-widget-title">Recent Comments</h2>
        <div class="well">
            <script type="text/javascript" src="http://pdn.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=48&excerpt_length=70"></script>
        </div>
    </div>
</section>



      
  </div>

</div>

            </div>
        </div>
        <footer class="footer">
            <p>
  Copyright &copy; 2012 - Lawrence Cheung -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
        </footer>
        

<script type="text/javascript">
      var disqus_shortname = 'pdn';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/assets/bootstrap/js/bootstrap.min.js"></script>
<script src="/assets/google-code-prettify/js/prettify.js"></script>
<script>
    (function($){
        $(function(){
            $("pre").each(function(){
            	if ($(this).parents(".gist").size() == 0){
            		$(this).addClass("prettyprint linenums");
            	}
            })
            prettyPrint()
        });
    })(jQuery)
</script>


    </div>
    </body>
</html>
